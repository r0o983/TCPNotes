# 第十八章 HTTP、HTML和万维网

## 18.1 什么是万维网

你通过Web浏览器窗口看到的网页视图，是该浏览器与某台Web服务器计算机之间会话的结果，用于那种会话的语言被称为超文本传输协议（HTTP），从服务器交付给客户端的数据，是一种制作精彩的文本，图形，地址和格式代码混合体，通过一种奇妙的通用格式化语言——超文本标记语言（HTML），呈递给统一标准的文档

* 标记语言：一种嵌入在文本中的指令和格式化代码系统
* 超文本：一种将链接嵌入文档，图像和其他文本中元素的方法
* Internet：一种全球性的计算机网络，通过TCP/IP，客户端请求服务，服务器提供服务

**注意** ：兼容性

当然，只有编写文档的应用程序和读取文档的应用程序就每一个代码的含义达成一致时，这些格式化代码系统才会起作用

Berners-Lee和其他HTML先驱者们想要一种通用的、独立于厂商的系统，用于编码格式信息。他们希望这种标记系统不仅包括排版代码，同时包括对图像文件的引用和指向其他文档的链接

超文本的概念（文本内的活链接，用于将视图切换至该链接中引用的文档）也在20 世纪60年代逐渐形成，Berners-Lee通过开发URL，将超文本概念带至Internet，链接使得阅读者能够轻松地查看在线信息，阅读者可以选择是否链接至另一个页面查看更多信息，HTML 文档可以被装配进统一标准的页面和链接系统），根据访问者在那些链接中来回穿行的情况，可以找到一条不同的路径来穿过那些数据。同时，Web 开发人员可以几乎毫无限制地定义某个链接将指向的位置，该链接可以指向相同目录下的另一个HTML文档，不同目录下的某个文档，乃至另一台计算机上的某个文档，这里的链接可能通往地球另一边的另外一台计算机上一个安全不同的网站

**网站是一个统一标准的页面和链接系统** 

![image-20200516132728410](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516132728410.png)

![image-20200516132758310](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516132758310.png)

总结一下这个简要介绍，一个基本的HTML文档包含下面这些元素：

* 文本
* 图形
* 文本格式化代码（字体和布局信息）
* 对象图形文件这样的辅助文件的引用
* 指向其他HTML文档或当前文档中其他位置的链接

## 18.2 理解HTML

**一些重要的HTML标记** 

![image-20200516132954507](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516132954507.png)

* 文档报头（封装在<HEAD>和</HEAD>标记之间）包含有关当前文档的信息，虽然，其中的<TITLE>标记会指定一个将出现在浏览器窗口标题栏中的标题，但是文档报头中的信息并不会出现在网页上，这里的<TITLE>是一个必需的要素。<HEAD>部分的其他要素都是可选的，比如用于指定有关文档样式信息的<STYLE>标记，要想更多了解<STYLE>，请查看某个HTML文本
* 文档主体（封装在<BODY>和</BODY>标记之间）是会实际出现在网页上的文本，以及与该文本相关的所有HTML标记

**HTML<FONT>标记属性** 

![image-20200516133310596](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516133310596.png)

**注意：** 大写字母

对于传统的HTML标记，大写字母是没有什么区别的，不过，后来的标准（比如XML和XHTML）对大写字母给予了更多关注，XML区分大小写，而XHTML要求小写的元素和属性名称

## 18.3 理解HTTP

HTTP是一种应用层协议，HTTP客户端和服务器应用程序使用可靠的TCP传输协议建立连接

HTTP可以完成以下工作：

* 在浏览器（客户端）和服务器之间建立一个连接
* 为会话协商设置和确定参数
* 为HTML内容的有序传输做准备
* 关闭与上述服务器的连接

当你在浏览器窗口中输入一个URL时，浏览器首先检查那个URL的描述，以确定相应的协议（除了HTTP之外，绝大多数Web浏览器还支持其他协议），如果浏览器确定该URL引用某个HTTP站点上的资源，那么它就会从那个URL提取相应的DNS名称，并启动名称解析进程，客户端计算机向一个名称服务器发送DNS查找请求，并接收该服务器的IP地址，浏览器然后利用该服务器的IP地址，启动一个与此服务器的TCP连接

**注意：** 持久性

在比较早的HTTP版本中（1.1版本之前），客户端和服务器为传输的额每一项，打开一个新的TCP连接，HTTP的近期版本允许客户端和服务器维持一个持久连接

在上述TCP连接建立之后，浏览器将使用HTTP GET命令，向该服务器请求相应的网页，这个GET命令包含浏览器正在请求的资源URL，以及浏览器向要为此事务使用的HTTP版本，在距大多数情况下，浏览器可以随此GET请求发送相对URL（而不是整个URL）因为与相应服务器的连接已经建立好了：GET /watergate/tapes/transcript HTTP/1.1，在这个GET命令之后，可能会跟着几对其他可选的field：value，指定语言，浏览器类型和可接收的文件类型之类的设置

服务器响应包括一个报头，后面跟着所请求的文档，响应报头的格式如下所示：

HTTP/1.1 ststus_code reason-phrase 

field：value

这里的状态代码，是一个描述请求状态的三位数，这里的reason-phrase（原因分析）是对该状态的一个简要描述，一些常见的状态代码如下表所示，可以看到，该代码最左边的那位表示一种通用分类，该位为1，表示提供信息，该位为2，表示成功；该位为3，表示重定向；该位为4，表示一个客户端错误；该位为5，表示一个服务器错误。你可能很熟悉那个著名的404代码，它经常在找不到页面或URL输入错误时出现，与客户端请求类似，服务器响应也可以包括许多可选的field:value对，其中一些报头字段如表所示。浏览器不能理解的任何字段都将被忽略。

**一些常见的HTTP状态码** 

![image-20200516134626198](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516134626198.png)
![image-20200516134636395](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516134636395.png)

**HTTP报头字段示例** 

![image-20200516134744163](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516134744163.png)

从表中可以看到，有些报头字段是纯粹的信息，而有些报头字段则可能包含用来分析和处理传入HTML文档的信息

这里的Content-Length字段特别重要，在早期的HTTP 1.0版本中，每一个请求/响应周期都需要一个新的TCP连接，客户端打开一个连接，并发起一个请求。服务器实现该请求，然后关闭该连接，在那种情况下，客户端知道服务器何时停止发送数据，因为该服务器关闭了相应的TCP连接，不幸的是，这个过程需要不断地打开和关闭连接，从而增加了系统开销，HTTP 1.1允许客户端和服务器在一次传输之后，继续维持相应的连接，在那种情况下，客户端需要以某种方式知道一个响应何时结束，这个Content-Length字段就指定与当前响应相关的HTML对象的长度，如果服务器不知道它正发送的对象的长度（随着动态HTML的出现，这种情况越来越常见），服务器发送报头字段Connection:close来通知浏览器，服务器将通过关闭当前连接来表示数据的结束

HTTP还支持一个协商阶段，服务器和浏览器可以在此期间就某些格式和首选项的共同设置达成共识

## 18.4 脚本

### 18.4.1 服务器端脚本编程

服务器端脚本编程可以让服务器接受来自客户端的输入，并在幕后处理这些输入，一个常见的服务器端脚本编程的场景如图所示，处理过程如下：

1. 用户浏览到一个页面，它包含一张用来购买某一产品或输入访问者信息的表单
2. 服务器根据用户选择生成该表单，并将其传送给浏览器
3. 用户在此表单中输入必要的信息，然后浏览器将该表单传回服务器
4. 服务器接收来自浏览器的数据，并使用一个编程接口，将此数据传递给处理用户信息的程序，如果用户正在购买某一产品，这些后台程序可能就检查信用卡信息，或者是发送一个出货单给客户，等等....之类的操作

**服务器端脚本编程的场景** 

![image-20200516135848448](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516135848448.png)

现在，有几种程序设计语言和环境可以用来帮助开发人员构建基于服务器的Web应用程序，一种将程序或脚本与网页相连接的方法是通过“公共网关接口”（Common Gateway Interface，CGI），CGI用来接受来自Web用户的表单型输入，处理该输入，然后生成HTML格式的输出，CGI脚本一般使用Perl语言编写，但是CGI能兼容其他语言，其中包括C语言

### 18.4.2 客户端脚本编程

JavaScript和VBScript是两种常见的客户端脚本编程技术，而且脚本文件通常通过HTML来饮用：

```
<script src='/script.js' type='text'/javascript'> <./script>
```



标记可以引用真实的指令，或者是引用包含代码的一个外部文件，无论哪种情况，只有当客户端计算机支持代码中引用的脚本语言时，才行得通

对某些类型的应用程序来说，客户端脚本编程是一种更为有效的选择，在客户端执行脚本的解释器（interpreter）更狗详细的查看本地环境，而且通过将交互元素限制在客户端，也减少了网络流量，提升了网络性能

AJAX（有时标榜为异步JavaScript和XML的缩写）是使用客户端脚本编程来对Web内容进行无缝升级的一组技术，它无需对整个网页进行刷新，其他一些常见的客户端技术为用户提供了一些交互选项，它可以调用动画或其他多媒体效果，也可以根据客户端系统的状态信息进行响应

## 18.5 Web浏览器

略

## 18.6 小结

本章描述了在那著名的Internet服务（即通常所说的万维网）背后工作的各个过程，内容包括Web的工作方式，以及HTML文档和HTTP协议，同时本章还介绍了动态HTML的概念

## 18.7 问与答

问：哪个HTML标记更改文本的颜色

**答：** 要想更改文本的颜色，请使用自带的color属性的<FONT>标记：<FONT COLOR="RED"> red text</FONT>

问：哪个HTML标记超文本链接？

**答：** 对于超文本链接，请使用自带HREF属性的<A>标签

## 18.8 测验

### 18.8.1问题

1. 为什么HTTP支持协商阶段？

   **答：** 如果服务器和浏览器被配置了不同的会话参数，则协商阶段可以让它们就必要的公共设置达成一致，以进行成功的通信

2. HTML文档的主要部分是什么？

   **答：** 包含标记信息，以及文件头信息，代码区，主要格式：<html><head>im a head</head><body>Im a body </body></html>

3. 考虑这样一个网站，它包含一个带有书名和价格信息的后段数据库，你应该使用服务器端脚本还是客户端脚本来为用户提供这么信息呢？

   **答：** 服务器端脚本来处理，由于数据库位于网络链接的服务器端，因此将完整的代码装在服务器上，效率更高也更安全

4. 假定你刚安装了一个新的系统，而且它运行零号，但是当你访问最喜欢的网站并点击一个PDF文件时，该文件却没有打开，你如何来解决这个问题呢？

   **答：** 安装相应的解析器即可（浏览器插件）

### 18.8.2 练习

略

## 18.9 关键术语

复习下列关键术语：

* 文档主体：包含将实际出现在浏览器窗口中的文本的HTML文档部分，这个主体部分封装在<BODY>和</BODY>之间
* 浏览器：一种HTTP客户端应用程序，大多数现代的浏览器都可以处理其他协议，比如FTP
* 客户端脚本编程：一种在客户端计算机（浏览器系统）上执行的脚本
* CGI（公共网关接口）：一种程序设计接口，允许设计人员把脚本和程序与某个网页结合在一起
* 文档报头：HTML文档的开始部分，包含文档的标题和其他可选参数，这个文档报头部分封装在<HEAD>和</HEAD>标记之间
* 超文本链接：网页的一个突出部分，当用户点击这种链接时，浏览器就会转向此URL指定的另一个文档或位置
* HTML（超文本标记语言）：一种用于构建网页的标记语言，HTML由文本和描述格式化，链接和图形的专用代码组成
* HTTP（超文本传输协议）：用来在服务器和用户端之间传输的HTML内容的协议
* PHP：一种流行的程序设计语言，用于Web开发
* 服务器端脚本编程：一种在服务器系统（Web服务器）上执行的脚本
* 标记：一种HTML指令