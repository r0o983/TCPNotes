# 第十九章 新的Web

## 19.1 Web2.0

新的Web组件看上去与老式网站不同，而且从人类交往和社区体验的观点来看，它们是具有革命性的，但是在后台，Web2.0技术基于许多与Web服务基础结构相同的组件，也是一个必然发展

* 数据库系统：用于存储和管理数据的单独系统
* 设计元素：预定义的标准元素
* 布局：站点的结构
* 脚本：通过把数据注入预定义结构来生成HTML代码的一种方式

### 19.1.1 内容管理系统

略

### 19.1.2 社交化网络

略

### 19.1.3 博客和维基

略

## 19.2 对等网络

有一种被称为对等联网（P2P，peer-to-peet）的新的信息共享技术，逐渐形成于Internet音乐共享团队（例如Napster），对等连网这个术语实际上是取自LAN网络上的有关配置，在哪里，服务是分散的，而且每一台计算机都即充当客户端又充当服务器，Internet对等连网形式允许整个网络里的计算机，在数据共享团体中分享数据，换句话说，数据并不是来自单台服务大量客户端请求的Web服务器，相反，数据保留在整个团体的普通PC上

多样性是Internet的创建目标之一，而且从理论上讲，任意一台能够连接到Internet的计算机，都可以与其他任何连接到Internet并装有必要服务的兼容计算机建立一个连接，不过要考虑到普通PC并不总是开着，同时还要考虑到，绝大多数连接到Internet的计算机都没有永久性的IP地址，而是通过DHCP接收一个动态地址，在常规的TCP/IP网络上，其他计算机不可能知道如何联系一台没有永久性IP地址或域名的计算机

解决这些问题的方案是提供一台中央服务器，用于分配客户端随后可以用来相互建立连接的连接信息，比如：计算机A用户等到到了Internet，该用户计算机上的客户端软件告诉服务器这个用户来了，服务器记录客户端的IP地址以及该客户端已经提供给所在团体的所有文件，计算机B上的一个用户连接到服务器，并发现计算机A上有一个所需的文件，服务器向计算机B提供联系计算机A必须的信息，计算机B联系联系计算机A，建立一个直接的连接，然后下载所需的文件

**一台对等联网计算机注册其地址以及其资源列表，其他计算机通过直接连接来访问那些资源** 

![image-20200516152549414](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516152549414.png)

对等连网团体最大的优点是，请求所需的IP地址以及建立相应连接的细节，都是在客户端软件中处理的，用户停留在对等连网应用程序的用户界面中，不必知道任何有关联网的事情

对等连网已经遭到抨击，但并不是因为其技术的不足，而且是因为法律原因，对于P2P的发展来说，它收到抨击的一个理由就是，它使得受版权保护的素材更加容易被人非法获得和使用

## 19.3 IRC和IM

IRC实际上是TCP/IP应用层上运行的一个协议，IRC协议被正式分配的端口为TCP端口194，但是服务器通常在更高的端口号处运行，以避免使用root权限操作，一个IRC网络就是一组IRC服务器被配置为相互通信，以支持网络用户的交互聊天会话

聊天会话通过IRC通道进行，来自网络中任何位置的多名用户都可以连接到该通道，并进行实时通信，通道组可以围绕某个普通的业余爱好或者专业兴趣形成，也可以围绕家庭或社会联系形成，被指派为通道管理者的一名用户在理论上负责该通道，具有禁止用户或主持聊天内容的权力

**IRC服务器接收来自用户的连接，并与网络上的其他服务器通信** 

![image-20200516153133872](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516153133872.png)

客户端程序允许用户连接到某台IRC服务器，并加入某个聊天通道，基于文本的客户端，通过一系列文本命令进行通信，最近的图形用户界面（GUI）工具忽略了这种命令语法的重要性，允许用户像正常会话一样输入文本

IRC网络很容易加入，有时只不过要求使用一个在线昵称来注册和登录，有些IRC网络已经努力强制实行更加有力的安全措施，然而，无论你怎样加强安全措施，IRC仍然不会被认为是特别安全的

即时通信（IM）在概念上与聊天相似，但是它没有那么多标准，而且通常提供范围更广的额选项，用户一般只需之策，下载客户端应用程序，然后与同在一个网络的朋友们交换联系信息即可，IM系统通常是专用的，而且相应的网络都由大型的Internet公司管理。

当前，还流行着一种基于可扩展消息处理现场协议（Extensible Messaging and Presence Protocol，XMPP）的开源即时通信，其技术来自于Jabber网络，XMPP是一种以XML为基础的协议，用于交换聊天消息

## 19.4 语义Web

### 19.4.1 资源描述框架

尽管万维网联盟（W3C）已经提出了几个策略，但是语义Web技术目前仍处于实验阶段，有一个在Web社区中已经受到大量关注的语义Web工具被称为资源描述框架（Resource Description Framework，RDF），RDF是一种用来表达提供含义指示的关系的框架，RDF的基本单位是一条由3个部分组成的语句，在RDF中被称为三元组，三元组的结构与基本橘子的主、谓、宾、结构相似

RDF三元组可以采用数种形式，但是其要领是每一个元素都被表示为一个通用资源标识符（URL），并且这些URI串联在一个用冒号隔开的列表中，都柏林核心元数据计划（Dublin Core Metadata Initiative）组织维持着RDF三元组中所引用的标准谓语的数据库

### 19.4.2 微格式

RDF是一种可以为文本添加含义的强大工具，但是Internet社区正在进行一场激烈的讨论，其讨论的主题是RDF概念是否太过复杂，太浪费精力，以至于无法应用到普通的Web开发方法中，一种替代方式是微格式，它没有过高的要求，而且对Web从也人员来说，它更容易管理和使用

与RDF不同，微格式不会视图表示完整的句子结构和语法结构，微格式的目的是使用一个预先定义的含义来标记一段与之相关的文本，这样查看站点的浏览器或其它Web应用程序就可以知道这段文字的用途

尽管微格式的实现依赖于HTML中的现有标记和概念，但是它不术语任何官方Internet规范，微格式社区都是独立出现的，其中一部分接收了非赢利组织CommerceNet的资助

## 19.5 XHTML

许多新的Web工具，以及当今出现在Internet上的许多其他站点，都依赖于另一个技术的发展，尽管该技术对本章而言很专业，但是还有必要提及，XHTML标准可以将老式的HTML和基于XML的Web环境的现实桥接起来，从本质上讲，XHTML一个定制的HTML功能，而且它符合XML语法，XHTML格式在XML模式（schema）的可解读的限制内，提供了HTML的所有表现力

尽管XHTML的概念与HTML相似，但是XHTML对于马虎或者是不规范的编码习惯更加苛求，某些声明的方式不同（或者说更加正规），而且标记的嵌套必须更加井井有条和精确，把HTML表示成XML模式的目的，是为了使开发人员在构建生成和解释代码的脚本及其他程序时，能够更加灵活，XHTML 还有助于更容易地被接收实体动态解释或修改，例如，移动设备的小屏幕可能无法按照规定的那样显示标准的HTML页面，但是把该页面当作XHTML接收的客户端应用程序，可以轻松地为比较小的屏幕修改文本

## 19.6 HTML5

HTML5的一些重要的新特性如下所示：

* 支持本地存储和离线应用程序
* 绘图（drawing）
* 嵌入式音频和视频
* 地理定位
* 语义元素

### 19.6.1 HTML5本地存储和离线应用程序的支持

cookie是Web服务器存储在远程客户端系统上的一小块永久性数据。多年以来，cookie一直是Web 场景中的一部分，你可以在大多数Web 浏览器中发现配置选项，通过它们，可以管理cookie的存储和保存方式，Web服务器使用cookie来恢复之前的应用程序的状态，或者是存储与用户之前行为相关的信息，cookie是大多数Web开发人员（和大多数Web用户）非常熟悉的一个有用的工具，但是，它本身还有一些限制，Cookie的存储容量只有4KB，仅能存储与用户和会话历史相关的少量数据，但是如今的Web开发人员需要更多的本地存储

HTML5自带的本地存储特性极大地扩展和增强了Web浏览器在本地系统存储和恢复信息的方法，HTML5存储（也称为Web存储或DOM存储）可以让浏览器存储Web应用程序内定义的设置值，本地存储具有很多好处，例如，在客户端执行的脚本将临时结果隐藏在存储区域内，因此降低了通过网络与服务器进行通信的需求，从而提升了性能。存储空间还可以存放当前会话状态的完整视图，这样，当服务器崩溃或连接丢失时，基于Web的游戏或其他交互式应用程序也可以恢复过来（在某些情况下，可以让应用程序处于暂停运行状态）

HTML5的本地存储功能产生了另外一个重要的改进：离线应用程序的支持，支持离线应用程序特性的Web浏览器可以在网络连接断开时，继续运行

下图中，支持离线处理的Web应用程序包含一个缓存清单（cache manifest），其中列出了离线运行时所需要的文件和其他资源，当浏览器第一次连接到站点时，缓存清单中列出的文件将会下载到客户端系统中

**缓存清单列出了离线处理所需要的资源，客户端下载所需要的文件，因此在连接丢失时也可以继续运行** 

![image-20200516160535300](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516160535300.png)

当网络不可达时，Web应用程序可以通过缓存清单中列出的文件和离线版本来继续运行，乍一看，似乎没有那么让人印象深刻，问题是，下载到客户端的文件不久之后就会过期，但是HTML5离线应用程序特性一个最有趣的地方，在连接恢复时，浏览器系统能够自动升级本地系统中的文件，并将所有离线的变化存回服务器，这样，当系统离线时，缓存清单中引用的文件也可以保持最新状态，而且客户端能够在不需要用户的帮助下，通过恢复后的连接，无缝的同步文件的更改

### 19.6.2 HTML5绘图

Internet用户已经很习惯看到照片和图标嵌入到网页中的图像文件，这种嵌入图形图像的技术极大得增强了网络的性能和美观，然而，Web设计人员和开发人员希望页面中能包含更多的东西，比如通过编程来绘制图形，或者是创建一个小动画，当用户观看时，该动画将会向用户播放，以前的HTML版本通过第三方的插件提供了该功能

HTML5通过一对重要的新元素推出了它自己的绘制功能，这一对元素是：用于位图图像的<cavas>元素和用于标量矢量图形（Scalar Vector Graphics，SVG）图形的，<svg>元素

更多信息请访问万维网联盟标量矢量图形页面：http://www.w3.org/Graphics/SVG/

### 19.6.3 HTML5嵌入式音频和视频

HTML5推出了一个新的<video>元素，用于通知浏览器：使用该标记引用的文件是一个视频文件，与此同时，HTML5对引用的音视频解码器也提供了直接支持（编码器主要是提供解码多媒体文件的方法），如果浏览器知道该文件是视频文件，它就可以访问必要的编解码器来播放该文件，而且整个过程可以通过浏览器自身来完成，而不需要额外的第三方应用程序

### 19.6.4 HTML5地理定位

HTML5的地理定位API提供了一种标准的方法，让应用程序查询设备，以获得地址位置的数据，程序可以使用定位API来确定设备的位置，而且可以处理其他地理定位数据，以映射到坐标系中或查找去往附近服务的路径

### 19.6.5 HTML5语义

HTML5通过一系列预先定义的HTML元素来使用语义，这一系列原图提供了文本的含义，用户可以使用这些元素来标记用于特定目的的文本

**注意：** 与语义有关的趣事是，你不需要确切的知道用户或应用程序为什么需要这些信息，文本的含义是编码到页面中的，页面访客可以确定如何显示或者解释这些信息

**HTML5语义元素** 

![image-20200516162210171](https://raw.githubusercontent.com/christopher-x/images/main/image-20200516162210171.png)

HTML5规范中包含的另外一个重要的语义概念是微数据，微数据是本章前面讲解的微格式概念的扩展，微数据特镇可以让用户构建专业词汇，从而为文本字符串分配含义，与重要主题（比如人员，事件，组织）相关的一些基本词汇之前已经定义，你还可以创建自己的微数据词汇，然后将数据源用作HTMl内的URL

与微格式相同，微数据也采取一系列名称/值对的形式，微数据开发后背的一个驱动力来自于搜索引擎业界，例如，Google一直在参与标准草案的制定和微数据词汇的定义

## 19.7 小结

本章描述了新Web的一些工具和技术，你学习了博客，维基和社交网站是如何使用像数据库和动态HTML这样的组件的，以及XHMTL是如何通过统一的XML模式提供HTML功能的，本章还介绍了对等连网，消息收发服务和语义Web

## 19.8 问与答

问：为什么使用维基而不使用传统的网站？

**答：** 维基易于拓展和修改，而且它支持协同作业，许多维基都有内置的版本控制系统，可以用于跟踪不同的用户的修订

问：分派给IRC的熟知端口号是多少？

**答：** 端口194

问：为什么有些IRC聊天服务器使用更高的端口号？

**答：** 在大多数UNIX/linux系统中，使用端口号低于1024来运行的程序都具有root权限，通常使用一个较高的端口号，可以允许更加严格的安全环境，注意，在如今的网络中，这是一种相当有限的安全措施，尽管它无法取代完整的安全系统，但是它为入侵者提供了额外的障碍，而且当私有的聊天组不需要有外部连接时，这可以让通道难以介入该聊天组

问：语义Web进行编码的优势是什么？

**答：** 语义信息可以让搜索引擎和其他工具解释更为复杂的数据

## 19.9 测验

### 19.9.1 问题

1. 为什么通常使用Web浏览器来访问cms工具？

   **答：** CMS和Web服务器完美继承，来管理和发布Web内容，CMS实质上是Web服务器系统的一个扩展，将CMS放置到一台独立的计算机中，会产生性能问题，甚至会引发安全问题

2. 对等网络的显著特征是什么？

   **答：** 每一个节点都可以充当客户端或者服务器

3. RDF三元组的三个组成部分是什么？

   **答：** 主谓宾，类似一个简单的语句，组成部分是主体，谓词，和对象

4. 为什么有些专家觉得Adobe Flash以及类似的工具在接下来几年会丧失影响力

   **答：** HTML5直接将Flash这样的功能集成到了HTML中

### 19.9.2 练习

略

## 19.10 关键术语

复习下列关键术语：

* 博客：一种在垂直滚动消息队列中张贴定期更新条目或新条目的网站
* 内容管理系统（CMS）：一款基于GUI的工具，它为构建和管理站点提供了一个易于使用的界面
* 地理定位：在地球上确定地理位置的行为，通常是使用类似于GPS的电子设备或手机来实现的
* 即时通信（IM）：一种实时消息收发技术
* Internet中继聊天（IRC）：一种用于实时文本消息收发的协议和网络服务
* 微数据：HTML5内微格式概念的一种实现
* 微格式：HTML文档内的一种语义结构，它定义了一个文本块的用途，并且将数据部分标记为一些列名称/值对
* 对等连网（P2P）：一种为了共享文件而在Internet用户之间建立直接连接的系统
* 资源描述框架（RDF）：一种语义Web框架
* 语义Web：一组提供有关Web数据含义的信息的技术
* 社交网站：几种支持博客编写，消息收发以及其他个人网站活动的服务之一
* Web2.0：一个反映交互式Web新形式的工具集
* 维基：一种可以轻松编辑的交互式网站，用于支持协同工作
* WYSIWYG（所见即所得）：一种可以像将在用户面前呈现的那样显示页面的编辑工具
* XHTML：一种通过XML模式的HTML表达方式
* XMPP（可扩展消息处理现场协议）：一种采用Jabber消息收发技术的开源消息收发协议